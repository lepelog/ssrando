allowed-time-of-day: DayOnly
macros:
  All Three Nodes: LMF Nodes On option | (North Part - Water Node & Lightning Node - Lightning Node & East - Fire Node - Fire Node)
  Raise Lanayru Mining Facility: Open LMF option | Desert - North Part - Activate Master Generator
  Can Navigate in Oasis: Can Defeat Ampilus | Hook Beetle | Lanayru Desert - Sand Oasis Brakeslide Trick


Mines:
  toplevel-alias: Lanayru Mines
  hint-region: Lanayru Mines
  Entry:
    locations:
      Unlock Statue: Nothing
      Goddess Cube: Goddess Sword
      Timeshift Stone: Can Hit Timeshift Stone | Itemless First Timeshift Stone Trick
      Ancient Flower Farming: Timeshift Stone
      Chest near First Timeshift Stone: Timeshift Stone
    exits:
      First Time Entrance: Impossible
      Statue: Unlock Statue
      Statues Area: Timeshift Stone

    Higher Area:
      entrance: Clawshots
      exits:
        Entry: Nothing
        Caves Entrance: Clawshots

      locations:
        Chest: Nothing

    Caves Entrance:
      exits:
        Higher Area: Clawshots
        Exit to Caves: Nothing

  Statues Area:
    locations:
      Blow Statues Down: Bomb Bag | Hook Beetle
      Chest behind Statue: Blow Statues Down
    exits:
      Entry: Nothing
      End: Blow Statues Down | Lanayru Mines Brakeslide Trick

  End:
    locations:
      Blow up Rock on Track: Nothing
      Chest: Nothing # There's a baba in the way
    exits:
      Statues Area: Statues Area - Blow Statues Down | Lanayru Mines Brakeslide Trick

    In Minecart:
      locations:
        End - Blow up Rock on Track: Bomb Bag & Sword & Lanayru Mines - Quick Bomb Trick
      entrance:
        Blow up Rock on Track
      exits:
        End: Blow up Rock on Track
        Exit to Desert: Nothing

Desert:
  toplevel-alias: Lanayru Desert
  hint-region: Lanayru Desert
  exits:
    Shared Statue Exit: Impossible  # Common for all, so placed here

  Entry:
    High Ledge after Vines:
      entrance: Entry - Timeshift Stone
      exits:
        Entry: Nothing
      locations:
        Retrieve Party Wheel: Sky - Fun Fun Island - Start Dodoh's Quest
        Chest: Nothing

    locations:
      Unlock Statue: Nothing
      Timeshift Stone: Bomb Bag & Can Hit Timeshift Stone

    exits:
      Exit to Mines: Timeshift Stone # I can't assume the minecart is available, right ?
      Desert - Shared Statue Exit: Unlock Statue
      Desert Entrance Statue Entrance: Impossible
      Near Hook Beetle Fight: Nothing

  Near Hook Beetle Fight:
    locations:
      Chest: Nothing
      Goddess Cube: Long Range Skyward Strike # Also accessible elsewhere
      Hook Beetle Fight: (Bomb Bag | Hook Beetle) & Can Defeat Bokoblins

      Defeat Spume to Sand Oasis: Long Range Skyward Strike | Bomb Bag | Bow | Hook Beetle | (Goddess Sword & Lanayru Desert - Spume Brakeslide Trick)
      Blow Statues to Sand Oasis Down: Hook Beetle
    exits:
      Entry: Nothing
      Top of West Wall: Clawshots
      Top of LMF: Raise Lanayru Mining Facility
      East: Temple of Time Skip - Brakeslide Trick | East - Open Wall Shortcut | Clawshots
      Sand Oasis: Blow Statues to Sand Oasis Down | (Defeat Spume to Sand Oasis & Lanayru Desert - Sand Oasis Brakeslide Trick)

  Sand Oasis: # Before
    locations:
      Near Hook Beetle Fight - Defeat Spume to Sand Oasis: Bomb Bag | Bow | Hook Beetle | Goddess Sword
      Near Hook Beetle Fight - Blow Statues to Sand Oasis Down: Hook Beetle

      Goddess Cube: Can Navigate in Oasis & Goddess Sword

    exits:
      Near Hook Beetle Fight:
        Near Hook Beetle Fight - Blow Statues to Sand Oasis Down |
        (Near Hook Beetle Fight - Defeat Spume to Sand Oasis & Lanayru Desert - Sand Oasis Brakeslide Trick)
      Top of West Wall: Clawshots | Top of West Wall - Push Minecart
      West Part: Can Navigate in Oasis | West Part - Push Minecart

  West Part:
    locations:
      Unlock Statue: Nothing
      Sand Oasis - Goddess Cube: Goddess Sword
      Push Minecart: Nothing
    exits:
      Desert - Shared Statue Exit: Unlock Statue
      West Desert Statue Entrance: Impossible
      Sand Oasis: Nothing
      Top of West Wall: Clawshots
      Near South Exit to Temple of Time: Can Navigate in Oasis | Near South Exit to Temple of Time - Push Minecart

  Near South Exit to Temple of Time:
    locations:
      Push Minecart: Nothing
    exits:
      South Exit to Temple of Time: Nothing
      West Part: Nothing

    Ledge to Caves:
      entrance: Clawshots
      exits:
        Near South Exit to Temple of Time: Nothing
        Exit to Caves: Nothing

  Top of West Wall:
    locations:
      Chest: Nothing
      Near Hook Beetle Fight - Goddess Cube: Goddess Sword
      Push Minecart: Nothing

    exits:
      Near Hook Beetle Fight: Nothing
      Sand Oasis: Nothing
      West Part: Nothing


  Top of LMF:
    locations:
      Chest: Nothing
    exits:
      North Part: Nothing
      East: Nothing
      Near Hook Beetle Fight: Nothing
      Exit to Lanayru Mining Facility: Nothing

  North Part:
    locations:
      Water Node: (Bomb Bag | Hook Beetle) & Sword
      Master Generator Timeshift Stone: Bomb Bag | Hook Beetle
      Activate Master Generator: All Three Nodes & Master Generator Timeshift Stone & Sword
      Unlock Statue: Nothing

      Chest on Platform near Lightning Node: Clawshots

    exits:
      Secret Passageway: Bomb Bag | (Hook Beetle & Secret Passageway Hook Beetle Opening Trick) | Tough Beetle
      North Exit to Temple of Time: Nothing
      East: Nothing
      Top of LMF: Raise Lanayru Mining Facility
      Desert - Shared Statue Exit: Unlock Statue
      North Desert Statue Entrance: Impossible
      Trial Gate: Nayru's Wisdom & Goddess Harp
      Lightning Node: Nothing


    Secret Passageway:
      exits:
        North Part: Nothing
      locations:
        Chest: Nothing
        Goddess Cube: Clawshots

    Lightning Node:
      locations:
        Timeshift Stone: Bomb Bag
        First Chest: Timeshift Stone
        Second Chest: Timeshift Stone
        # needs a way to deactivate the timeshift stone while being
        # in the back room
        Raised Chest near Generator: Timeshift Stone & (Beetle | Bow | Bomb Bag)
        Lightning Node: Timeshift Stone & Sword
      exits:
        Exit: Nothing


  East:
    locations:
      Open Wall Shortcut: Nothing
      Unlock Statue: Nothing
      Chest on Platform near Fire Node: Clawshots

    exits:
      North Part: Nothing
      Top of LMF: Raise Lanayru Mining Facility
      Near Hook Beetle Fight: Open Wall Shortcut | Temple of Time Skip - Brakeslide Trick
      Desert - Shared Statue Exit: Nothing
      Stone Cache Statue Entrance: Impossible
      Fire Node: Nothing


    Fire Node:
      locations:
        Timeshift Stone: Bomb Bag
        Can Cross Sand: Can Defeat Ampilus | Fire Node - Brakeslide Trick

        Shortcut Chest: Nothing
        First Chest: Timeshift Stone
        Second Chest: Timeshift Stone
      
      exits:
        Past after Grate: Timeshift Stone & Can Cross Sand & Hook Beetle
        Exit: Nothing

      Past after Grate:
        locations:
          Left Ending Chest: Nothing
          Right Ending Chest: Nothing
          Fire Node: Sword


Temple of Time:
  exits:
    Shared Statue Exit: Impossible  # Common for all, so placed here

  South East:
    locations:
      Unlock Statue: Nothing
    exits:
      South Exit to Desert: Nothing
      Temple of Time - Shared Statue Exit: Unlock Statue
      Desert Gorge Statue Entrance: Impossible
      Front: Hook Beetle | (Slingshot & Temple of Time - Slingshot Shot Trick)

  Front:
    locations:
      Gossip Stone: Nothing
      Blow up Rock for Timeshift Stone:
        Hook Beetle | (Bomb Throws Trick & (Bomb Bag | (Cactus Bomb Whip Trick & Whip)))
      Timeshift Stone: Blow up Rock for Timeshift Stone & Distance Activator
      Near Goddess Cube - Timeshift Stone: Long Range Skyward Strike | Distance Activator

    exits:
      Inside: Nothing
      Near Goddess Cube: Near Goddess Cube - Timeshift Stone

  Inside:
    locations:
      Unlock Statue: Nothing
    exits:
      Temple of Time - Shared Statue Exit: Unlock Statue
      Temple of Time Statue Entrance: Impossible
      Exit to Lanayru Mining Facility: Nothing  # The exit is left unbound internally
      Front: Nothing

  Near Goddess Cube:
    locations:
      Timeshift Stone: Impossible
      Goddess Cube: Goddess Sword
    exits:
      North East: Nothing

  North East:
    exits:
      South East: Distance Activator
      North Exit to Desert: Nothing

Silent Realm:
  hint-region: Lanayru Silent Realm
  exits:
    Exit: Nothing
  locations:
    Clawshots: Nothing

Caves:
  toplevel-alias: Lanayru Caves
  hint-region: Lanayru Caves
  locations:
    Chest: Nothing
    Golo's Gift: Nothing
    Gossip Stone in Center: Nothing

  exits:
    Past Door to Sand Sea: Clawshots & Lanayru Caves Small Key
    Past Crawlspace: Nothing
    Exit to Mines: Nothing
    Exit to Desert: Nothing

  Past Door to Sand Sea:
    exits:
      Caves: Lanayru Caves Small Key
      Exit to Sand Sea: Nothing

  Past Crawlspace:
    locations:
      Gossip Stone towards Gorge: Nothing
    exits:
      Caves: Nothing
      Exit to Gorge: Nothing


Sand Sea:
  hint-region: Sand Sea
  Ancient Harbour:
    toplevel-alias: Sand Sea Docks
    Near Exit to Caves:
      entrance: Clawshots
      exits:
        Exit to Caves: Nothing
        Ancient Harbour: Clawshots
      locations:
        Left Rupee on Entrance Crown: Quick Beetle
        Right Rupee on Entrance Crown: Quick Beetle
        Rupee on First Pillar: Beetle

    locations:
      Goddess Cube: Clawshots & Goddess Sword
      Unlock Statue: Nothing
      Ship Timeshift Stone: Distance Activator | Goddess Sword | Bomb Bag

    exits:
      Dock: Ship Timeshift Stone
      Exit to Sandship: Sand Sea - Shoot down Sandship
      Statue: Unlock Statue

  locations:
    Shoot down Sandship: Sea Chart & Sword

  exits:
    Ancient Harbour Dock: Nothing
    Sandship Dock: Shoot down Sandship
    Skipper's Retreat Dock: Nothing
    Shipyard Dock: Nothing
    Pirate Stronghold Dock: Nothing

  Skipper's Retreat:
    locations:
      Unlock Statue: Nothing
      Blow up Rock: Bomb Bag | Hook Beetle | (Whip & Cactus Bomb Whip Trick)

    exits:
      Statue: Unlock Statue
      Dock: Nothing
      Past Rock: Blow up Rock & Clawshots

    Past Rock:
      locations:
        Chest after Moblin: Nothing
        Goddess Cube: Clawshots & Goddess Sword
        Deal with Boko Baba: Slingshot | Beetle | Bow | Skipper's Retreat Fast Clawshots Trick

      exits:
        Skipper's Retreat: Nothing
        Top Part: Clawshots & Whip & Deal with Boko Baba

    Top Part:
      locations:
        Chest on top of Cacti Pillar: Clawshots

      exits:
        Shack: Nothing
        Past Rock: Nothing
        Skydive Platform: Nothing

    Shack:
      locations:
        Chest: Gust Bellows
      exits:
        Exit: Nothing

    Skydive Platform:
      locations:
        Chest: Nothing
      exits:
        Skipper's Retreat: Nothing

  Shipyard:
    locations:
      Unlock Statue: Nothing
      Gossip Stone: Nothing # Take the first cart and you've arrived
      Rickety Coaster -- Heart Stopping Track in 1'05:
        # Roller Coaster Minigame
        Construction Bay - Defeat Moldarach
    exits:
      Statue: Unlock Statue
      Dock: Nothing
      Construction Bay Upper Exit: Nothing
      Construction Bay Lower Exit: Construction Bay - Defeat Moldarach

    Construction Bay:
      locations:
        Defeat Moldarach: Gust Bellows & Sword
      exits:
        Upper Exit: Nothing
        Lower Exit: Defeat Moldarach

  Pirate Stronghold:
    locations:
      Unlock Statue: Nothing
      Rupee on West Sea Pillar: Quick Beetle
      Rupee on East Sea Pillar: Quick Beetle
      Rupee on Bird Statue Pillar or Nose: Beetle
      Goddess Cube: Inside - Finish Minidungeon & Clawshots & Goddess Sword

    exits:
      Statue: Unlock Statue
      Dock: Nothing
      Side Exit: Nothing
      Top Exit: Inside - Finish Minidungeon # What happens if you take it before finishing the minidungeon ?

    Inside:
      locations:
        First Chest: Nothing
        # You can run past the Beamos without killing it. You can also run past the boko baba (in logic?) #UNSURE
        Second Chest: Nothing
        Third Chest: Nothing
        Finish Minidungeon: Can Defeat Beamos & Can Defeat Armos & Goddess Sword
        # Technically this is possible without beating a Beamos but it's hard

      exits:
        First Door: Nothing
        Second Door: Finish Minidungeon

  Gorge:
    toplevel-alias: Lanayru Gorge
    hint-region: Lanayru Gorge
    locations:
      Unlock Statue: Nothing
      Item on Pillar: Beetle
      Activate Timeshift Stone: Can Hit Timeshift Stone in Minecart
      Thunder Dragon's Reward: Activate Timeshift Stone & Life Tree Fruit

      Boss Rush -- 4 Bosses: Thunder Dragon's Reward & Impossible
      Boss Rush -- 8 Bosses: Thunder Dragon's Reward & Impossible

    Beyond Bridge:
      locations:
        Activate Timeshift Stone: Gust Bellows & Can Hit Timeshift Stone
        Goddess Cube: Goddess Sword
        Life Tree Seedling: Activate Timeshift Stone & Digging Mitts
      exits:
        Gorge: Beetle | Bow # To activate the main Timeshift Stone

    exits:
      Statue: Unlock Statue
      Beyond Bridge: Activate Timeshift Stone
      Exit: Nothing
