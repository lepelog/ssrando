allowed-time-of-day: DayOnly
hint-region: Ancient Cistern

macros:
  Can Lower Statue: Can Freely Raise and Lower Statue
  Can Freely Raise and Lower Statue: Impossible

Main:
  Main Room:
    locations:
      Lever to Block Waterfall: Whip
      Rupee in Left Hand: Water Scale
      Rupee in Right Hand: Water Scale
    exits:
      Main Exit: Nothing
      East Part: Nothing
      After Whip Hooks: Whip
      Behind the Waterfall: Lever to Block Waterfall & Water Scale
      Inside Statue: Can Lower Statue | Ancient Cistern Small Key x 2
      Basement - Under the Statue: Ancient Cistern - Cistern Clip Trick & Sword
      Inside Statue - Whip Chest Room: Ancient Cistern - Cistern Clip Trick & Sword & Ancient Cistern - Cistern Whip Room Clip Trick

    After Whip Hooks:
      locations:
        Chest: Nothing
      exits:
        Vines Area: Clawshots
        Main Room: Nothing

    Vines Area:
      locations:
        Chest: Nothing
        Ancient Cistern - Can Lower Statue: Whip
        Main Room - Lever to Block Waterfall: Ancient Cistern - Lever Jump Trick
      exits:
        # Can front hop and jump slash
        After Whip Hooks: Sword & Ancient Cistern - Map Chest Jump Trick
        After Gutters - Upper Area: After Gutters - Upper Lever
        Spider Thread Area: Spider Thread Area - Extend Platform
        Main Room: Nothing

    Behind the Waterfall:
      locations:
        Chest: Nothing
      exits:
        Basement Gutters: Whip

    After Gutters:
      locations:
        Rupee under Lilypad: Water Scale & Whip & Impossible  # Can be skipped
      exits:
        After Whip Hooks: Nothing
        Upper Area: Water Scale & Whip

      Upper Area:
        locations:
          Upper Lever: Whip
        exits:
          After Gutters: Nothing
          Vines Area: Upper Lever

    Spider Thread Area:
      locations:
        Extend Platform: Nothing
        Ancient Cistern - Can Freely Raise and Lower Statue: Whip
      exits:
        Vines Area: Extend Platform
        Main Room: Nothing
        Basement: Nothing

  East Part:
    exits:
      Main Room: Nothing
      Second Room: Can Unlock Combination Lock

    Second Room:
      locations:
        Rupee in Cubby: Water Scale
        First Rupee in Short Tunnel: Water Scale
        Second Rupee in Short Tunnel: Water Scale
        Third Rupee in Short Tunnel: Water Scale
        Rupee in Main Tunnel: Water Scale
      exits:
        East Part: Nothing
        East Part - Chest Ledge: Water Scale  # or Lilypad Skip

    Chest Ledge:
      exits:
        Main Room: Nothing
      locations:
        Chest: Nothing

  Basement Gutters:
    exits:
      Past Skulltula:
        (Beetle | Bow) & Water Scale # | Ancient Cistern - Basement Lilypad Clip Trick)

    Past Skulltula:
      locations:
        Bokoblin: Whip
      exits:
        Basement Gutters: Water Scale
        Main Room - After Gutters: Ancient Cistern Small Key x 2

  # Implies statue is lowered
  Basement:
    exits:
      Inside Statue: Nothing
      # In the Basement you can either clawshot around the boulder, or use hook Beetle to blow it up.
      # A very precise bomb throw also works (not in logic).
      Rotating Vines: (Whip & Hook Beetle) | Clawshots
      Spider Thread: Spider Thread - Activate Water Geyser | Ancient Cistern - Basement Highflip Trick
      Under the Statue: Ancient Cistern - Basement Highflip Trick

    Rotating Vines:
      exits:
        Basement: Nothing
        Spider Thread: Whip

    Spider Thread:
      locations:
        Activate Water Geyser: Whip
      exits:
        Basement: Nothing
        Under the Statue: Can Freely Raise and Lower Statue
        Main Room - Spider Thread Area: Nothing

    # Implies statue is raised
    Under the Statue:
      locations:
        Ancient Cistern - Can Lower Statue: Nothing
        Boss Key Chest: Ancient Cistern - Can Lower Statue
      exits:
        Basement: Nothing

  Inside Statue:
    exits:
      Basement: Can Lower Statue
      Main Room: Whip
      Boss Door: Ancient Cistern Boss Key & Whip
      Whip Chest Room: Ancient Cistern Small Key x 2 & (Can Defeat Stalmaster | Can Lower Statue)

    Whip Chest Room:
      locations:
        Chest: Nothing
      exits:
        Inside Statue: Ancient Cistern Small Key x 2


Boss Room:
  locations:
    Beat Koloktos: Whip & (Sword | Bomb Bag | Bow)
    Heart Container: Beat Koloktos
  exits:
    Exit to Dungeon: Beat Koloktos
    Exit to Flame Room: Beat Koloktos

Flame Room:
  locations:
    Farore's Flame: Goddess Sword
  exits:
    Exit: Nothing
    # Crest Hit: Farore's Flame
